(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{8769:function(e,t,n){Promise.resolve().then(n.bind(n,5283))},5283:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return DocumentBrowser}});var r=n(7437),a=n(2265),c=n(6702),s=n(732);function DocumentEditor(e){let{doc:t,onSaved:n}=e,[o,u]=(0,a.useState)(t.content||""),[i,d]=(0,a.useState)(!1),[h,l]=(0,a.useState)(null);async function save(){d(!0);try{await (0,c.gU)(t.id,o),l("saved"),n&&n(t.id,o)}catch(e){l("error")}finally{d(!1)}}return(0,r.jsxs)(s.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"space-y-2 border rounded p-2",children:[(0,r.jsx)("textarea",{className:"w-full border rounded p-2 text-sm",rows:8,value:o,onChange:e=>u(e.target.value)}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:save,disabled:i,className:"bg-primary text-primary-foreground px-3 py-1 rounded",children:i?"Saving...":"Save"}),"saved"===h&&(0,r.jsx)("span",{className:"text-green-600 text-sm",children:"Saved"}),"error"===h&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:"Error"})]})]})}function DocumentBrowser(){let[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(null),[o,u]=(0,a.useState)(!1);function handleSaved(e,n){t(t=>t.map(t=>t.id===e?{...t,content:n}:t))}return(0,a.useEffect)(()=>{(async function(){u(!0);try{let e=await (0,c.Dh)(),n=e.documents||e.docs||e;t(n)}finally{u(!1)}})()},[]),(0,r.jsxs)("div",{className:"space-y-4",children:[o&&(0,r.jsx)("p",{children:"Loading..."}),!o&&(0,r.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("li",{className:"border rounded",children:[(0,r.jsxs)("button",{className:"w-full text-left p-2 font-semibold",onClick:()=>s(n===e.id?null:e.id),children:[e.title," ",(0,r.jsx)("span",{className:"opacity-60 text-xs",children:e.project_id})]}),n===e.id&&(0,r.jsx)(DocumentEditor,{doc:e,onSaved:handleSaved})]},e.id))})]})}},6702:function(e,t,n){"use strict";n.d(t,{Dh:function(){return fetchDocuments},Ei:function(){return writeMemory},IW:function(){return fetchOpsMetrics},JB:function(){return postMemoryQuery},L3:function(){return fetchRecentTasks},_s:function(){return syncClaudeLogs},gU:function(){return updateDocument},k4:function(){return fetchProductDocs},z:function(){return fetchRecentPosts}});var r=n(2549);function authHeader(){{let e=localStorage.getItem("token");if(e)return{Authorization:"Bearer ".concat(e)}}return{}}async function postMemoryQuery(e){let t=await fetch("".concat(r.S,"/memory/query"),{method:"POST",headers:{"Content-Type":"application/json",...authHeader()},body:JSON.stringify({query:e})});return t.json()}async function syncClaudeLogs(){return fetch("".concat(r.S,"/sync-claude-logs"),{method:"POST",headers:authHeader()}).then(e=>e.json())}async function fetchDocuments(){return fetch("".concat(r.S,"/documents"),{headers:authHeader()}).then(e=>e.json())}async function updateDocument(e,t){return fetch("".concat(r.S,"/memory/update"),{method:"POST",headers:{"Content-Type":"application/json",...authHeader()},body:JSON.stringify({document_id:e,content:t})}).then(e=>e.json())}async function writeMemory(e){return fetch("".concat(r.S,"/memory/write"),{method:"POST",headers:{"Content-Type":"application/json",...authHeader()},body:JSON.stringify(e)}).then(e=>e.json())}async function fetchProductDocs(){return fetch("".concat(r.S,"/memory/query?tags=product&limit=50"),{headers:authHeader()}).then(e=>e.json())}async function fetchOpsMetrics(){return fetch("".concat(r.S,"/dashboard/ops"),{headers:authHeader()}).then(e=>e.json())}async function fetchRecentPosts(){return fetch("".concat(r.S,"/memory/search?limit=5"),{headers:authHeader()}).then(e=>e.json())}async function fetchRecentTasks(){return fetch("".concat(r.S,"/dashboard/tasks"),{headers:authHeader()}).then(e=>e.json())}},2549:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});let r="https://brainops-operator.onrender.com"}},function(e){e.O(0,[600,971,472,744],function(){return e(e.s=8769)}),_N_E=e.O()}]);