exports.id=181,exports.ids=[181],exports.modules={3573:(e,s,t)=>{Promise.resolve().then(t.bind(t,8332)),Promise.resolve().then(t.t.bind(t,614,23))},8332:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AssistantChatWidget});var a=t(784),r=t(9885);async function readSSE(e,s){let t=e.body?.getReader();if(!t)return;let a=new TextDecoder,r="";for(;;){let{value:e,done:l}=await t.read();if(l)break;if(e){r+=a.decode(e,{stream:!0});let t=r.split("\n\n");for(let e of(r=t.pop()||"",t)){let t=e.trim();if(t.startsWith("data:")){let e=t.slice(5).trim();if("[DONE]"===e)return;s(e)}}}}}function AssistantChatWidget(){let[e,s]=(0,r.useState)(!1),[t,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1);async function send(){if(!o.trim())return;d("");let e=0;l(s=>(e=s.length+1,[...s,{role:"user",text:o},{role:"assistant",text:""}])),i(!0);try{let s=await fetch("/api/assistant/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o,stream:!0})});if(s.headers.get("content-type")?.includes("text/event-stream"))await readSSE(s,s=>{l(t=>{let a=[...t];return a[e].text+=s,a})});else{let t=await s.json(),a=t.response||t.result||t.completion||"";l(s=>{let t=[...s];return t[e].text=a,t})}}catch(s){l(s=>{let t=[...s];return t[e].text="Error",t})}finally{i(!1)}}return(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>s(e=>!e),className:"fixed bottom-4 right-4 bg-primary text-primary-foreground px-4 py-2 rounded-full",children:e?"Close":"Chat"}),e&&(0,a.jsxs)("div",{className:"fixed bottom-16 right-4 bg-background border rounded shadow-lg w-80 max-h-96 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 p-2 overflow-auto space-y-2",children:[t.map((e,s)=>a.jsx("div",{className:"user"===e.role?"text-right":"text-left",children:a.jsx("span",{className:"text-sm whitespace-pre-wrap",children:e.text})},s)),n&&a.jsx("p",{className:"text-sm opacity-50",children:"..."})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),send()},className:"p-2 border-t flex gap-2",children:[a.jsx("input",{className:"flex-1 border px-2 py-1 rounded",value:o,onChange:e=>d(e.target.value),placeholder:"Message"}),a.jsx("button",{type:"submit",disabled:n,className:"bg-primary text-primary-foreground px-3 py-1 rounded",children:"Send"})]})]})]})}},2642:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>DashboardLayout,metadata:()=>h});var a=t(4656);t(3542);var r=t(4353),l=t.n(r);t(7633);var o=t(5153);let d=(0,o.createProxy)(String.raw`/home/mwwoodworth/brainstackstudio/fastapi-operator-env/frontend/components/AssistantChatWidget.tsx`),{__esModule:n,$$typeof:i}=d,c=d.default,h={title:"BrainOps Dashboard"};function DashboardLayout({children:e}){return(0,a.jsxs)("div",{className:"min-h-screen flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-muted p-4 hidden md:block",children:[a.jsx("h1",{className:"font-bold mb-4",children:"BrainOps"}),(0,a.jsxs)("nav",{className:"space-y-2",children:[a.jsx(l(),{href:"/dashboard",className:"block",children:"Home"}),a.jsx(l(),{href:"/dashboard/memory",className:"block",children:"Memory"}),a.jsx(l(),{href:"/dashboard/ops",className:"block",children:"Ops"}),a.jsx(l(),{href:"/dashboard/copilot",className:"block",children:"Copilot"}),a.jsx(l(),{href:"/dashboard/copilot-v2",className:"block",children:"Copilot v2"}),a.jsx(l(),{href:"/dashboard/sync",className:"block",children:"Sync"}),a.jsx(l(),{href:"/dashboard/documents",className:"block",children:"Documents"}),a.jsx(l(),{href:"/dashboard/generate",className:"block",children:"Generate"}),a.jsx(l(),{href:"/dashboard/pipeline",className:"block",children:"Pipeline"}),a.jsx(l(),{href:"/dashboard/products",className:"block",children:"Products"}),a.jsx(l(),{href:"/dashboard/export",className:"block",children:"Export"})]})]}),a.jsx("div",{className:"flex-1 p-4",children:e}),a.jsx(c,{})]})}}};