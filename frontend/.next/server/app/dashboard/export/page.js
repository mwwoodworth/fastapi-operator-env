(()=>{var e={};e.id=644,e.ids=[644],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4386:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>l});var a=r(7096),o=r(6132),s=r(7284),n=r.n(s),i=r(2564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let l=["",{children:["dashboard",{children:["export",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5692)),"/home/mwwoodworth/brainstackstudio/fastapi-operator-env/frontend/app/dashboard/export/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2642)),"/home/mwwoodworth/brainstackstudio/fastapi-operator-env/frontend/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,5345)),"/home/mwwoodworth/brainstackstudio/fastapi-operator-env/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/home/mwwoodworth/brainstackstudio/fastapi-operator-env/frontend/app/dashboard/export/page.tsx"],p="/dashboard/export/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/dashboard/export/page",pathname:"/dashboard/export",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},5512:(e,t,r)=>{Promise.resolve().then(r.bind(r,4539))},4539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ExportPanel});var a=r(784),o=r(9885),s=r(745);async function runExportJob(){try{let e=await fetch(`${s.S}/export-docs`,{method:"POST"});if(e.ok)return e.json()}catch(e){}return{message:"Local export simulated"}}async function listExportedFiles(){try{let e=await fetch(`${s.S}/export-docs/list`);if(e.ok)return e.json()}catch(e){}return fetch("/exports/index.json").then(e=>e.json())}async function uploadFileToDrive(e){try{let t=await fetch(`${s.S}/export-docs/upload/${e}`,{method:"POST"});if(t.ok)return t.json()}catch(e){}return{url:""}}var n=r(1440),i=r.n(n);function ExportPanel(){let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)(!1),[n,d]=(0,o.useState)("");async function load(){try{let e=await listExportedFiles(),r=e.files||e;t(r)}catch(e){console.error(e)}}async function handleExport(){s(!0);try{let e=await runExportJob();d(e.message||"Export completed"),await load()}catch(e){d("Failed")}finally{s(!1)}}async function handleUpload(e){try{let r=await uploadFileToDrive(e),a=r.url||r.drive_url;t(t=>t.map(t=>t.id===e?{...t,uploaded:!0,drive_url:a}:t))}catch(e){console.error(e)}}return(0,o.useEffect)(()=>{load();let e=setInterval(handleExport,216e5);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("button",{onClick:handleExport,disabled:r,className:"bg-primary text-primary-foreground px-4 py-2 rounded",children:r?"Exporting...":"Run Export Now"}),n&&a.jsx("p",{className:"text-sm",children:n}),a.jsx("ul",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("li",{className:"border rounded p-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:e.title||e.name}),a.jsx("span",{className:"text-xs opacity-60",children:e.created_at||e.date})]}),e.summary&&a.jsx("p",{className:"text-xs mt-1 whitespace-pre-wrap",children:e.summary}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm",children:[a.jsx("button",{onClick:()=>handleUpload(e.id),disabled:e.uploaded,className:"bg-primary text-primary-foreground px-2 py-1 rounded",children:"Upload to Drive"}),e.uploaded?a.jsx("span",{className:"text-green-600",children:"✅"}):a.jsx("span",{className:"text-red-600",children:"❌"}),e.drive_url&&a.jsx(i(),{href:e.drive_url,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Open"}),!e.drive_url&&e.path&&a.jsx(i(),{href:e.path,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Preview"})]})]},e.id))})]})}},745:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});let a="https://brainops-operator.onrender.com"},5692:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ExportPage});var a=r(4656);r(3542);var o=r(5153);let s=(0,o.createProxy)(String.raw`/home/mwwoodworth/brainstackstudio/fastapi-operator-env/frontend/components/ExportPanel.tsx`),{__esModule:n,$$typeof:i}=s,d=s.default;function ExportPage(){return(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Export Documents"}),a.jsx(d,{})]})}},784:(e,t,r)=>{"use strict";e.exports=r(316).vendored["react-ssr"].ReactJsxRuntime},1440:(e,t,r)=>{e.exports=r(614)}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[570,926,181],()=>__webpack_exec__(4386));module.exports=r})();